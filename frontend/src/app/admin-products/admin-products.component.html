<div class="admin-products-container" *ngIf="isAdmin; else accessDenied">
    <!-- ‚úÖ Onglets pour naviguer entre les sections -->
    <div class="tabs">
        <button [class.active]="activeTab === 'add'" (click)="setActiveTab('add')">Ajout</button>
        <button [class.active]="activeTab === 'edit'" (click)="setActiveTab('edit')">Modification</button>
        <button [class.active]="activeTab === 'delete'" (click)="setActiveTab('delete')">Suppression</button>
    </div>

    <h2>Gestion des Produits</h2>

    <!-- ‚úÖ Gestion des erreurs -->
    <p *ngIf="errorMessage" class="error-message">{{ errorMessage }}</p>

    <!-- ‚úÖ SECTION AJOUT & MODIFICATION -->
    <div *ngIf="activeTab !== 'delete'">
        <form [formGroup]="productForm" (ngSubmit)="saveProduct()">
            <table class="product-table">
                <tbody>
                    <tr>
                        <td><strong>Nom du produit</strong></td>
                        <td colspan="3">
                            <input type="text" formControlName="name" placeholder="Nom du produit" required>
                        </td>
                    </tr>

                    <tr>
                        <td><strong>Prix (‚Ç¨)</strong></td>
                        <td colspan="3">
                            <input type="number" formControlName="price" placeholder="Prix" min="0" required>
                        </td>
                    </tr>

                    <tr>
                        <td><strong>Description</strong></td>
                        <td colspan="3">
                            <textarea formControlName="description" placeholder="Description du produit" required></textarea>
                        </td>
                    </tr>

                    <tr>
                        <td colspan="4" class="center">
                            <button type="submit" class="validate-button">‚úÖ Valider</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </form>
    </div>

    <!-- ‚úÖ SECTION SUPPRESSION -->
    <div *ngIf="activeTab === 'delete'" class="delete-section">
        <table class="product-table">
            <tbody>
                <tr>
                    <td><strong>Nom du produit</strong></td>
                    <td>
                        <select [(ngModel)]="selectedProduct" required>
                            <option *ngFor="let product of products" [value]="product.id">{{ product.name }}</option>
                        </select>
                    </td>
                </tr>
            </tbody>
        </table>

        <div class="center">
            <button class="delete-button" (click)="deleteProduct()">üóëÔ∏è Supprimer</button>
        </div>
    </div>
</div>

<!-- ‚úÖ Message si l'utilisateur n'est pas admin -->
<ng-template #accessDenied>
    <p class="error-message">üö´ Acc√®s refus√©. Vous devez √™tre administrateur pour g√©rer les produits.</p>
</ng-template>
